<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Validador - <%= restaurantName %></title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <%- include('layouts/main', { body: `
    <div class="validator-container">
        <div class="validator-card">
            <h1>Validador de Comandas</h1>
            <p class="subtitle">Ingrese el nÃºmero de orden o escanee el cÃ³digo QR</p>

            <div class="search-box">
                <input 
                    type="text" 
                    id="orderNumber" 
                    placeholder="Ingrese nÃºmero de orden"
                    class="input-search"
                    autofocus
                >
                <button class="btn btn-primary btn-lg" onclick="validateOrder()">
                    Validar
                </button>
                <button class="btn btn-success btn-lg" onclick="startQRScanner()">
                    ðŸ“· Escanear QR
                </button>
            </div>

            <!-- Scanner de QR -->
            <div id="qr-scanner-container" style="display: none;">
                <div class="scanner-header">
                    <h3>Escanear CÃ³digo QR</h3>
                    <button class="btn btn-danger" onclick="stopQRScanner()">âœ• Cerrar CÃ¡mara</button>
                </div>
                <div id="qr-video-container">
                    <video id="qr-video" playsinline></video>
                    <div class="scanner-frame"></div>
                </div>
                <p class="scanner-hint">Coloque el cÃ³digo QR dentro del marco</p>
            </div>

            <div id="validationResult" class="validation-result"></div>
        </div>

        <div class="recent-validations">
            <h3>Ãšltimas Validaciones</h3>
            <div id="recentList"></div>
        </div>
    </div>
    ` }) %>

    <!-- LibrerÃ­a para escanear QR -->
    <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.min.js"></script>
    <script src="/js/validator.js"></script>
</body>
</html>